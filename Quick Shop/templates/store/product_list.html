{% extends "base.html" %}
{% load static %}
{% block title %}Product List{% endblock title %}

{% block main %}
<main class="main">
    <nav aria-label="breadcrumb" class="breadcrumb-nav mb-2">
        <div class="container">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item"><a href="#">Shop</a></li>
                <li class="breadcrumb-item active" aria-current="page">Grid 3 Columns</li>
            </ol>
        </div><!-- End .container -->
    </nav><!-- End .breadcrumb-nav -->

    <div class="page-content">
        <div class="container">
            <div class="row">
                <div class="col-lg-9">
                    <div class="toolbox">
                        <div class="toolbox-left">
                            {% if products.count > 0 %}
                            <div class="toolbox-info">
                                <p class="text-dark">Showing <span>( {{products.count}} )</span> Products</p>
                            </div><!-- End .toolbox-info -->
                            {% endif %}
                        </div><!-- End .toolbox-left -->

                        <div class="toolbox-right">
                            <div class="toolbox-sort">
                                <label for="sortby">Sort by:</label>
                                <div class="select-custom">
                                    <select name="sortby" id="sortby" class="form-control">
                                        <option value="popularity" selected="selected">Most Popular</option>
                                        <option value="rating">Most Rated</option>
                                        <option value="date">Date</option>
                                    </select>
                                </div>
                            </div><!-- End .toolbox-sort -->
                        </div><!-- End .toolbox-right -->
                    </div><!-- End .toolbox -->

                    {% if products.count > 0 %}
                    <div class="products mb-3">
                        <div class="row justify-content-center" id="filteredProducts">
                            <p class="ajaxLoader">Loading...</p>
                            {% for product in products %}
                            <div class="col-sm-6 col-md-4 col-lg-4 product-box">
                                <div class="product product-7 text-center">
                                    <figure class="product-media">
                                        <span class="product-label label-circle label-top">Top</span>
                                        <span class="product-label label-circle label-sale">Sale</span>
                                        <a href="{% url "product_details" product.slug product.id %}">
                                            {% if product.products_images.first.gallery %}
                                            <img style"width: 100%; height: 100%;" src="{{product.products_images.first.gallery.url}}" alt="{{product.title|title}}" class="product-image">
                                            {% else %}
                                            <img style"width: 100%; height: 100%;" src="{% static 'assets/img/370x300.png' %}" alt="{{product.title|title}}">
                                            {% endif %}
                                        </a>
            
                                        <div class="product-action-vertical">
                                            <a href="#" class="btn-product-icon btn-wishlist" title="Add to wishlist"></a>
                                        </div><!-- End .product-action -->
            
                                        <div class="product-action">
                                            <a href="popup/quickView.html" class="btn-product btn-quickview" title="Quick view"><span>quick view</span></a>
                                        </div><!-- End .product-action -->
                                    </figure><!-- End .product-media -->
            
                                    <div class="product-body">
                                        <div class="product-cat">
                                            <a href="#">{{product.category.title|title}}</a>
                                        </div><!-- End .product-cat -->
                                        <h3 class="product-title"><a href="{% url "product_details" product.slug product.id %}">{{product.title|title}}</a></h3><!-- End .product-title -->
                                        <div class="product-price">
                                            <span class="new-price">$ {{product.price|title}}</span>
                                            {% if product.old_price %}
                                            <span class="old-price">Was $ {{product.old_price|title}}</span>
                                            {% endif %}
                                        </div><!-- End .product-price -->
                                        <div class="ratings-container">
                                            <div class="ratings">
                                                <div class="ratings-val" style="width: 100%;"></div><!-- End .ratings-val -->
                                            </div><!-- End .ratings -->
                                            <span class="ratings-text">( 10 Reviews )</span>
                                        </div><!-- End .rating-container -->
            
                                        <div class="product-nav product-nav-dots">
                                            <a href="#" class="active" style="background: #edd2c8;"><span class="sr-only">Color name</span></a>
                                            <a href="#" style="background: #eaeaec;"><span class="sr-only">Color name</span></a>
                                            <a href="#" style="background: #333333;"><span class="sr-only">Color name</span></a>
                                        </div><!-- End .product-nav -->
                                    </div><!-- End .product-body -->
                                </div><!-- End .product -->
                            </div><!-- End .col-sm-6 col-lg-4 -->
                            {% endfor %}
                        </div><!-- End .row -->
                    </div><!-- End .products -->
                    
                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center">
                            <p class="text-center">
                                <button id="loadMore" data-limit="{{paginate_by}}" data-total="{{total_data}}" style="background-color: #000; color: #fff; padding: 5px 15px; border-radius: 5px; border: none" >Load More <i class="fa fa-sync load-more-icon"></i> </button>
                            </p>
                        </ul>
                    </nav>
                    {% endif %}
                    
                </div><!-- End .col-lg-9 -->
                <aside class="col-lg-3 order-lg-first">
                    {% include "components/filters.html" %}
                </aside><!-- End .col-lg-3 -->
            </div><!-- End .row -->
        </div><!-- End .container -->
    </div><!-- End .page-content -->
</main><!-- End .main --> 

{% endblock main %}